# ğŸš€ WSLç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ - ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

## âŒ ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: Windowså´ã‹ã‚‰WSLã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ

```
'\\wsl.localhost\Ubuntu-20.04\home\user1\DockerDashBord\graphql-server'
ä¸Šè¨˜ã®ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ CMD.EXE ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚
UNC ãƒ‘ã‚¹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã›ã‚“ã€‚Windows ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ—¢å®šã§ä½¿ç”¨ã—ã¾ã™ã€‚
'NODE_OPTIONS' ã¯ã€å†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¾ãŸã¯å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã€
æ“ä½œå¯èƒ½ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¾ãŸã¯ãƒãƒƒãƒ ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: WSLå†…ã§ `.bat` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ

```bash
# WSLå†…ã§å®Ÿè¡Œ
./run-all-tests.bat

# ã‚¨ãƒ©ãƒ¼:
# UNC ãƒ‘ã‚¹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã›ã‚“
# npm error path C:\Windows\package.json
```

## âœ… åŸå› 

WSLç’°å¢ƒã§ã®UNCãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ã«ã¯2ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ï¼š

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: Windowså´ã‹ã‚‰WSLã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹
Windowså´ï¼ˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€PowerShellï¼‰ã‹ã‚‰
WSLã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã®**UNCãƒ‘ã‚¹**ï¼ˆ`\\wsl.localhost\...`ï¼‰ã§ã¯ã€
Node.jsç’°å¢ƒå¤‰æ•°ã‚„npmã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ­£å¸¸ã«å‹•ä½œã—ã¾ã›ã‚“ã€‚

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: WSLå†…ã§ `.bat` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
WSLç’°å¢ƒã§`.bat`ï¼ˆWindowsãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€
WSLãŒè‡ªå‹•çš„ã«Windowså´ã®CMD.EXEã§å®Ÿè¡Œã—ã‚ˆã†ã¨ã™ã‚‹ãŸã‚ã€
ãƒ‘ã‚¹å¤‰æ›ã®å•é¡Œã§UNCãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

**é‡è¦**: WSLå†…ã§ã¯å¿…ãš`.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼

## ğŸ¯ è§£æ±ºç­–ï¼ˆ3ã¤ã®æ–¹æ³•ï¼‰

---

### æ–¹æ³•1: WSLã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§å®Ÿè¡Œã€æ¨å¥¨ã€‘â­

æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿãªæ–¹æ³•ã§ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ—

```bash
# 1. WSLã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã
wsl

# 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
cd ~/DockerDashBord

# 3. ãƒ‘ã‚¹ã‚’ç¢ºèªï¼ˆUNCãƒ‘ã‚¹ã§ãªã„ã“ã¨ã‚’ç¢ºèªï¼‰
pwd
# æ­£å¸¸: /home/user1/DockerDashBord
# ç•°å¸¸: /mnt/c/... ã¾ãŸã¯ \\wsl.localhost\...

# 4. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆå¿…ãš .sh ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ï¼‰
./run-all-tests.sh
```

**âš ï¸ é‡è¦**: WSLå†…ã§ã¯`run-all-tests.bat`ã‚’å®Ÿè¡Œã—ãªã„ã§ãã ã•ã„ï¼
- `.bat`ã¯Windowsãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã§ã™
- WSLã§å®Ÿè¡Œã™ã‚‹ã¨UNCãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
- å¿…ãš`.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

#### WSLã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®é–‹ãæ–¹

**æ–¹æ³•A: ã‚³ãƒãƒ³ãƒ‰ã§é–‹ã**
```bash
# PowerShellã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§
wsl
```

**æ–¹æ³•B: ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰**
- Windows ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒUbuntuã€ã¾ãŸã¯ã€ŒWSLã€ã‚’æ¤œç´¢
- ã‚¯ãƒªãƒƒã‚¯ã—ã¦èµ·å‹•

**æ–¹æ³•C: Windows ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰**
- Windows ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã
- ã‚¿ãƒ–ã®ã€Œ+ã€â†’ Ubuntuï¼ˆã¾ãŸã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

**æ–¹æ³•D: VSCode ã‹ã‚‰**
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
- `Ctrl + Shift + P` â†’ "WSL: Reopen Folder in WSL"
- çµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãï¼ˆ`Ctrl + `` ï¼‰

---

### æ–¹æ³•2: Windowsç”¨ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ä¾¿åˆ©ã€‘ğŸ”§

Windowså´ã‹ã‚‰è‡ªå‹•çš„ã«WSLå†…ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

#### ä½¿ã„æ–¹

```powershell
# PowerShellã§å®Ÿè¡Œ
.\run-tests-wsl.ps1
```

#### æ©Ÿèƒ½
- âœ… WSLã®åˆ©ç”¨å¯èƒ½æ€§ã‚’è‡ªå‹•ç¢ºèª
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã‚’è‡ªå‹•æ¤œå‡º
- âœ… WSLå†…ã§æ­£ã—ããƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
- âœ… ã‚¨ãƒ©ãƒ¼æ™‚ã«ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æƒ…å ±ã‚’è¡¨ç¤º

#### å®Ÿè¡Œå‰ã®æº–å‚™

```powershell
# æœ€æ–°ç‰ˆã‚’å–å¾—
git pull origin main

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ¨©é™ã‚’ç¢ºèªï¼ˆPowerShellã§å¿…è¦ãªå ´åˆï¼‰
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned
```

---

### æ–¹æ³•3: wslã‚³ãƒãƒ³ãƒ‰ã§ç›´æ¥å®Ÿè¡Œã€ä¸Šç´šè€…å‘ã‘ã€‘ğŸ’»

PowerShellã‹ã‚‰wslã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```powershell
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œ
wsl bash -c "cd ~/DockerDashBord && ./run-all-tests.sh"

# ã¾ãŸã¯ npm ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§
wsl bash -c "cd ~/DockerDashBord && npm run test:all"
```

---

## ğŸ“‹ å®Œå…¨ãªå®Ÿè¡Œæ‰‹é †ï¼ˆåˆå›ï¼‰

WSLç’°å¢ƒã§åˆã‚ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã®å®Œå…¨ãªæ‰‹é †ï¼š

```bash
# 1. WSLã«å…¥ã‚‹
wsl

# 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
cd ~/DockerDashBord

# 3. æœ€æ–°ç‰ˆã‚’å–å¾—
git pull origin main

# 4. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x run-all-tests.sh

# 5. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm run install:all

# 6. Dockerã‚’èµ·å‹•ï¼ˆE2Eãƒ†ã‚¹ãƒˆç”¨ï¼‰
docker compose up -d

# 7. Dockerèµ·å‹•ç¢ºèª
docker compose ps
# ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒ "Up" ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

# 8. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
./run-all-tests.sh
```

---

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: WSLã«å…¥ã‚Œãªã„

```powershell
# PowerShellï¼ˆç®¡ç†è€…æ¨©é™ï¼‰ã§
wsl --shutdown
wsl
```

### å•é¡Œ: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# WSLå†…ã§
cd ~
find . -name "DockerDashBord" -type d 2>/dev/null
```

### å•é¡Œ: æ¨©é™ã‚¨ãƒ©ãƒ¼

```bash
chmod +x run-all-tests.sh
```

### å•é¡Œ: DockerãŒèµ·å‹•ã—ãªã„

```bash
# Docker Desktopï¼ˆWindowså´ï¼‰ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
# WSLçµ±åˆãŒæœ‰åŠ¹ã‹ç¢ºèª: Docker Desktop > Settings > Resources > WSL Integration
```

---

## ğŸ“Š å®Ÿè¡Œçµæœã®è¦‹æ–¹

æˆåŠŸã—ãŸå ´åˆ:
```
==========================================
ğŸ§ª Hospital Dashboard - All Tests Runner
==========================================

âœ… Server Unit Tests PASSED
âœ… Server Integration Tests PASSED
âœ… Client Component Tests PASSED
âœ… E2E Tests PASSED

ğŸ“Š Test Results Summary
âœ… Passed: 4
âŒ Failed: 0

ğŸ‰ All tests passed!
```

å¤±æ•—ã—ãŸå ´åˆ:
```
âŒ Server Unit Tests FAILED
...
ğŸ’¥ Some tests failed!
```

å€‹åˆ¥ã®ãƒ­ã‚°ã‚’ç¢ºèª:
```bash
# ã‚µãƒ¼ãƒãƒ¼ãƒ†ã‚¹ãƒˆã®è©³ç´°
cd graphql-server && npm test -- --verbose

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®è©³ç´°
cd dashboard && npm test

# E2Eãƒ†ã‚¹ãƒˆã®è©³ç´°ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼‰
cd e2e-tests && npm run test:headed
```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[WSL_EXECUTION_GUIDE.md](./WSL_EXECUTION_GUIDE.md)** - WSLå®Ÿè¡Œã®è©³ç´°ã‚¬ã‚¤ãƒ‰
- **[TROUBLESHOOTING.md](./TROUBLESHOOTING.md)** - å…¨èˆ¬çš„ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **[TEST_QUICKSTART.md](./TEST_QUICKSTART.md)** - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰
- **[TESTING.md](./TESTING.md)** - ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¨TDDè©³ç´°

---

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### é–‹ç™ºæ™‚

```bash
# WSLã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§é–‹ç™º
wsl
cd ~/DockerDashBord

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§é–‹ç™º
cd graphql-server && npm run test:watch
# ã¾ãŸã¯
cd dashboard && npm run test:watch
```

### ã‚³ãƒŸãƒƒãƒˆå‰

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
./run-all-tests.sh

# ã™ã¹ã¦ãƒ‘ã‚¹ã—ãŸã‚‰ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "..."
git push
```

---

## ã¾ã¨ã‚

**æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•:**

1. `wsl` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
2. `cd ~/DockerDashBord`
3. `./run-all-tests.sh`

**ã“ã‚Œã§UNCãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ã¯å®Œå…¨ã«è§£æ±ºã—ã¾ã™ï¼** âœ…

---

## ğŸ†˜ ã•ã‚‰ã«å›°ã£ãŸã‚‰

1. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª**
   - [WSL_EXECUTION_GUIDE.md](./WSL_EXECUTION_GUIDE.md)
   - [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)

2. **ãƒ­ã‚°ã‚’ç¢ºèª**
   ```bash
   docker compose logs -f
   ```

3. **å®Œå…¨ãƒªã‚»ãƒƒãƒˆ**
   ```bash
   docker compose down -v
   docker compose up -d --build
   npm run install:all
   ```

4. **GitHub Issues**
   - https://github.com/hiro1966/DockerDashBord/issues
